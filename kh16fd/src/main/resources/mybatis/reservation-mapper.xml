<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reservation">
  	<!-- 시퀀스 생성 -->
  	<select id="sequence" resultType="long">
  		select reservation_seq.nextval from dual
  	</select>
  	
  	<!-- 중복 체크 -->
  	<select id="checkSlot" resultType="int">
  		select count(*) from reservation 
  		where reservation_target = #{reservationTarget} 
  		and reservation_seat = #{reservationSeat} 
  		and reservation_time = #{reservationTime}
  		and reservation_status = '예약완료'
  	</select>
  	
  	<!-- 예약 등록 -->
  	<insert id="insert">
  		insert into reservation(
  		reservation_id, reservation_member, 
  		reservation_target, reservation_people_count,
  		reservation_status, reservation_time, 
  		reservation_seat
  		) 
  		values(
  		#{reservationId}, #{reservationMember},
  		#{reservationTarget}, #{reservationPeopleCount}, 
  		#{reservationStatus}
  		)
  	</insert>
  	
  	<select id="detail" resultType="ReservationDto">
  		select * from reservation 
  		where reservation_id = #{reservation_id}
  	</select>
</mapper>