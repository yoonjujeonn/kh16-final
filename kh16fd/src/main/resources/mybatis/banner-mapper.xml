<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="banner">

    <!-- 시퀀스 -->
    <select id="sequence" resultType="int">
    	select banner_seq.nextval from dual
    </select>

    <!-- C : 등록 -->
    <insert id="insert">
        insert into banner (
            banner_no,
            banner_title,
            banner_link,
            banner_order,
            banner_attachment_no
        ) values (
            #{bannerNo},
            #{bannerTitle},
            #{bannerLink},
            #{bannerOrder},
            #{bannerAttachmentNo}
        )
    </insert>

    <!-- R : 전체 조회 -->
    <select id="list" resultType="BannerDto">
        select
            banner_no as bannerNo,
            banner_title as bannerTitle,
            banner_link as bannerLink,
            banner_order as bannerOrder,
            banner_attachment_no as bannerAttachmentNo
        from banner
        order by banner_order asc, banner_no desc
    </select>

    <!-- R : 상세 조회 -->
    <select id="detail" resultType="BannerDto">
        select
            banner_no as bannerNo,
            banner_title as bannerTitle,
            banner_link as bannerLink,
            banner_order as bannerOrder,
            banner_attachment_no as bannerAttachmentNo
        from banner
        where banner_no = #{bannerNo}
    </select>

    <!-- U : 부분 수정 -->
    <update id="updateUnit">
        update banner
        <set>
            <if test="bannerTitle != null">
                banner_title = #{bannerTitle},
            </if>
            <if test="bannerLink != null">
                banner_link = #{bannerLink},
            </if>
            <if test="bannerOrder != null">
                banner_order = #{bannerOrder},
            </if>
            <if test="bannerAttachmentNo != null">
                banner_attachment_no = #{bannerAttachmentNo},
            </if>
        </set>
        where banner_no = #{bannerNo}
    </update>

    <!-- D : 삭제 -->
    <delete id="delete">
        delete from banner where banner_no = #{bannerNo}
    </delete>

</mapper>
